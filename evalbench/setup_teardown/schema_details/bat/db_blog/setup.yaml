setup_commands:
  excluded_columns:
    postgres: []
    mysql: []
  pre_setup:
    postgres:
    - "SET statement_timeout = 0;"
    - "SET lock_timeout = 0;"
    - "SET idle_in_transaction_session_timeout = 0;"
    - "SET client_encoding = 'UTF8';"
    - "SET standard_conforming_strings = on;"
    - "SELECT pg_catalog.set_config('search_path', '', false);"
    - "SET check_function_bodies = false;"
    - "SET xmloption = content;"
    - "SET client_min_messages = warning;"
    - "SET row_security = off;"
    - "SET statement_timeout = 0;"
    - "SET lock_timeout = 0;"
    - "SET idle_in_transaction_session_timeout = 0;"
    - "SET client_encoding = 'UTF8';"
    - "SET standard_conforming_strings = on;"
    - "SELECT pg_catalog.set_config('search_path', '', false);"
    - "SET check_function_bodies = false;"
    - "SET xmloption = content;"
    - "SET client_min_messages = warning;"
    - "SET row_security = off;"
    - "SET default_tablespace = '';"
    - "SET default_table_access_method = heap;"
    mysql: []
  post_schema_creation:
    postgres:
    - "ALTER TABLE public.tbl_attachments OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_attachments_attachment_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_attachments_attachment_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_attachments_attachment_id_seq OWNED BY public.tbl_attachments.attachment_id;"
    - "ALTER TABLE public.tbl_categories OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_categories_category_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_categories_category_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_categories_category_id_seq OWNED BY public.tbl_categories.category_id;"
    - "ALTER TABLE public.tbl_categories_hierarchy OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_categories_hierarchy_category_hierarchy_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_categories_hierarchy_category_hierarchy_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_categories_hierarchy_category_hierarchy_id_seq OWNED BY public.tbl_categories_hierarchy.category_hierarchy_id;"
    - "ALTER TABLE public.tbl_comments OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_comments_comment_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_comments_comment_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_comments_comment_id_seq OWNED BY public.tbl_comments.comment_id;"
    - "ALTER TABLE public.tbl_country OWNER TO nl2sql;"
    - "ALTER TABLE public.tbl_followers OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_followers_follower_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_followers_follower_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_followers_follower_id_seq OWNED BY public.tbl_followers.follower_id;"
    - "ALTER TABLE public.tbl_labels OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_labels_label_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_labels_label_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_labels_label_id_seq OWNED BY public.tbl_labels.label_id;"
    - "ALTER TABLE public.tbl_media OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_media_media_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_media_media_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_media_media_id_seq OWNED BY public.tbl_media.media_id;"
    - "ALTER TABLE public.tbl_notifications OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_notifications_notification_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_notifications_notification_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_notifications_notification_id_seq OWNED BY public.tbl_notifications.notification_id;"
    - "ALTER TABLE public.tbl_posts OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_posts_post_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_posts_post_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_posts_post_id_seq OWNED BY public.tbl_posts.post_id;"
    - "ALTER TABLE public.tbl_posts_tags OWNER TO nl2sql;"
    - "ALTER TABLE public.tbl_private_messages OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_private_messages_message_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_private_messages_message_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_private_messages_message_id_seq OWNED BY public.tbl_private_messages.message_id;"
    - "ALTER TABLE public.tbl_reactions OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_reactions_reaction_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_reactions_reaction_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_reactions_reaction_id_seq OWNED BY public.tbl_reactions.reaction_id;"
    - "ALTER TABLE public.tbl_reports OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_reports_report_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_reports_report_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_reports_report_id_seq OWNED BY public.tbl_reports.report_id;"
    - "ALTER TABLE public.tbl_status OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_status_status_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_status_status_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_status_status_id_seq OWNED BY public.tbl_status.status_id;"
    - "ALTER TABLE public.tbl_tags OWNER TO nl2sql;"
    - "ALTER TABLE public.tbl_tags_hierarchy OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_tags_hierarchy_tag_hierarchy_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_tags_hierarchy_tag_hierarchy_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_tags_hierarchy_tag_hierarchy_id_seq OWNED BY public.tbl_tags_hierarchy.tag_hierarchy_id;"
    - "CREATE SEQUENCE public.tbl_tags_tag_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_tags_tag_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_tags_tag_id_seq OWNED BY public.tbl_tags.tag_id;"
    - "ALTER TABLE public.tbl_user_activity OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_user_activity_activity_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_user_activity_activity_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_user_activity_activity_id_seq OWNED BY public.tbl_user_activity.activity_id;"
    - "ALTER TABLE public.tbl_user_roles OWNER TO nl2sql;"
    - "CREATE SEQUENCE public.tbl_user_roles_role_id_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;"
    - "ALTER SEQUENCE public.tbl_user_roles_role_id_seq OWNER TO nl2sql;"
    - "ALTER SEQUENCE public.tbl_user_roles_role_id_seq OWNED BY public.tbl_user_roles.role_id;"
    - "ALTER TABLE public.tbl_users OWNER TO nl2sql;"
    - "ALTER TABLE ONLY public.tbl_attachments ALTER COLUMN attachment_id SET DEFAULT nextval('public.tbl_attachments_attachment_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_categories ALTER COLUMN category_id SET DEFAULT nextval('public.tbl_categories_category_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_categories_hierarchy ALTER COLUMN category_hierarchy_id SET DEFAULT nextval('public.tbl_categories_hierarchy_category_hierarchy_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_comments ALTER COLUMN comment_id SET DEFAULT nextval('public.tbl_comments_comment_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_followers ALTER COLUMN follower_id SET DEFAULT nextval('public.tbl_followers_follower_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_labels ALTER COLUMN label_id SET DEFAULT nextval('public.tbl_labels_label_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_media ALTER COLUMN media_id SET DEFAULT nextval('public.tbl_media_media_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_notifications ALTER COLUMN notification_id SET DEFAULT nextval('public.tbl_notifications_notification_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_posts ALTER COLUMN post_id SET DEFAULT nextval('public.tbl_posts_post_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_private_messages ALTER COLUMN message_id SET DEFAULT nextval('public.tbl_private_messages_message_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_reactions ALTER COLUMN reaction_id SET DEFAULT nextval('public.tbl_reactions_reaction_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_reports ALTER COLUMN report_id SET DEFAULT nextval('public.tbl_reports_report_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_status ALTER COLUMN status_id SET DEFAULT nextval('public.tbl_status_status_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_tags ALTER COLUMN tag_id SET DEFAULT nextval('public.tbl_tags_tag_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_tags_hierarchy ALTER COLUMN tag_hierarchy_id SET DEFAULT nextval('public.tbl_tags_hierarchy_tag_hierarchy_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_user_activity ALTER COLUMN activity_id SET DEFAULT nextval('public.tbl_user_activity_activity_id_seq'::regclass);"
    - "ALTER TABLE ONLY public.tbl_user_roles ALTER COLUMN role_id SET DEFAULT nextval('public.tbl_user_roles_role_id_seq'::regclass);"
    - "DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_roles WHERE rolname = 'tmp_dql') THEN EXECUTE 'CREATE USER tmp_dql'; END IF; END $$;"
    - "GRANT USAGE ON SCHEMA public TO tmp_dql;"
    - "GRANT SELECT ON ALL TABLES IN SCHEMA public TO tmp_dql;"
    - "DO $$ BEGIN IF NOT EXISTS (SELECT 1 FROM pg_roles WHERE rolname = 'tmp_dml') THEN EXECUTE 'CREATE USER tmp_dml'; END IF; END $$;"
    - "GRANT USAGE ON SCHEMA public TO tmp_dml;"
    - "GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO tmp_dml;"
    mysql:
    - "ALTER TABLE tbl_attachments ADD PRIMARY KEY (`attachment_id`), ADD KEY `fk_post_id` (`post_id`), ADD KEY `fk_user_id` (`user_id`), ADD KEY `fk_parent_attachment_id` (`parent_attachment_id`), ADD CONSTRAINT `fk_parent_attachment_id` FOREIGN KEY (`parent_attachment_id`) REFERENCES `tbl_attachments` (`attachment_id`)"
    - "ALTER TABLE tbl_categories_hierarchy ADD PRIMARY KEY (`category_hierarchy_id`), ADD KEY `category_id` (`category_id`), ADD KEY `created_by` (`created_by`), ADD KEY `updated_by` (`updated_by`)"
    - "ALTER TABLE tbl_categories ADD PRIMARY KEY (`category_id`), ADD KEY `created_by` (`created_by`), ADD KEY `updated_by` (`updated_by`)"
    - "ALTER TABLE tbl_comments ADD PRIMARY KEY (`comment_id`), ADD KEY `user_id` (`user_id`), ADD KEY `post_id` (`post_id`)"
    - "ALTER TABLE tbl_country ADD PRIMARY KEY (`country_name`), ADD KEY `country_id` (`country_id`)"
    - "ALTER TABLE tbl_followers ADD PRIMARY KEY (`follower_id`)"
    - "ALTER TABLE tbl_labels ADD PRIMARY KEY (`label_id`), ADD KEY `creator_id` (`creator_id`), ADD KEY `updated_by` (`updated_by`), ADD KEY `parent_label_id` (`parent_label_id`)"
    - "ALTER TABLE tbl_media ADD PRIMARY KEY (`media_id`)"
    - "ALTER TABLE tbl_notifications ADD PRIMARY KEY (`notification_id`), ADD KEY `user_id` (`user_id`), ADD KEY `sender_id` (`sender_id`), ADD KEY `post_id` (`post_id`)"
    - "ALTER TABLE tbl_posts_tags ADD PRIMARY KEY (`post_id`,`tag_id`), ADD KEY `tag_id` (`tag_id`)"
    - "ALTER TABLE tbl_posts ADD PRIMARY KEY (`post_id`), ADD KEY `user_id` (`user_id`)"
    - "ALTER TABLE tbl_private_messages ADD PRIMARY KEY (`message_id`), ADD KEY `sender_id` (`sender_id`), ADD KEY `receiver_id` (`receiver_id`), ADD KEY `attachment_id` (`attachment_id`), ADD KEY `parent_message_id` (`parent_message_id`)"
    - "ALTER TABLE tbl_reactions ADD PRIMARY KEY (`reaction_id`), ADD KEY `comment_id` (`comment_id`)"
    - "ALTER TABLE tbl_reports ADD PRIMARY KEY (`report_id`), ADD KEY `user_id` (`user_id`), ADD KEY `post_id` (`post_id`), ADD KEY `resolved_by` (`resolved_by`), ADD KEY `reported_user_id` (`reported_user_id`), ADD KEY `reported_comment_id` (`reported_comment_id`)"
    - "ALTER TABLE tbl_status ADD PRIMARY KEY (`status_id`)"
    - "ALTER TABLE tbl_tags_hierarchy ADD PRIMARY KEY (`tag_hierarchy_id`)"
    - "ALTER TABLE tbl_tags ADD PRIMARY KEY (`tag_id`), ADD KEY `creator_id` (`creator_id`), ADD KEY `category_id` (`category_id`)"
    - "ALTER TABLE tbl_user_activity ADD PRIMARY KEY (`activity_id`), ADD KEY `user_id` (`user_id`), ADD KEY `post_id` (`post_id`), ADD KEY `comment_id` (`comment_id`)"
    - "ALTER TABLE tbl_user_roles ADD PRIMARY KEY (`role_id`), ADD KEY `created_by` (`created_by`), ADD KEY `updated_by` (`updated_by`)"
    - "ALTER TABLE tbl_users ADD PRIMARY KEY (`user_id`)"
    # Foreign key constraints
    - "ALTER TABLE tbl_attachments ADD CONSTRAINT `fk_post_id` FOREIGN KEY (`post_id`) REFERENCES `tbl_posts` (`post_id`), ADD CONSTRAINT `fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`user_id`)"
    - "ALTER TABLE tbl_categories_hierarchy ADD CONSTRAINT `tbl_categories_hierarchy_ibfk_1` FOREIGN KEY (`category_id`) REFERENCES `tbl_categories` (`category_id`), ADD CONSTRAINT `tbl_categories_hierarchy_ibfk_2` FOREIGN KEY (`created_by`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_categories_hierarchy_ibfk_3` FOREIGN KEY (`updated_by`) REFERENCES `tbl_users` (`user_id`)"
    - "ALTER TABLE tbl_categories ADD CONSTRAINT `tbl_categories_ibfk_1` FOREIGN KEY (`created_by`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_categories_ibfk_2` FOREIGN KEY (`updated_by`) REFERENCES `tbl_users` (`user_id`)"
    - "ALTER TABLE tbl_comments ADD CONSTRAINT `tbl_comments_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_comments_ibfk_2` FOREIGN KEY (`post_id`) REFERENCES `tbl_posts` (`post_id`)"
    - "ALTER TABLE tbl_country ADD CONSTRAINT `tbl_country_ibfk_1` FOREIGN KEY (`country_id`) REFERENCES `tbl_users` (`user_id`)"
    - "ALTER TABLE tbl_labels ADD CONSTRAINT `tbl_labels_ibfk_1` FOREIGN KEY (`creator_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_labels_ibfk_2` FOREIGN KEY (`updated_by`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_labels_ibfk_3` FOREIGN KEY (`parent_label_id`) REFERENCES `tbl_labels` (`label_id`)"
    - "ALTER TABLE tbl_notifications ADD CONSTRAINT `tbl_notifications_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_notifications_ibfk_2` FOREIGN KEY (`sender_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_notifications_ibfk_3` FOREIGN KEY (`post_id`) REFERENCES `tbl_posts` (`post_id`)"
    - "ALTER TABLE tbl_posts_tags ADD CONSTRAINT `tbl_posts_tags_ibfk_1` FOREIGN KEY (`tag_id`) REFERENCES `tbl_tags` (`tag_id`), ADD CONSTRAINT `tbl_posts_tags_ibfk_2` FOREIGN KEY (`post_id`) REFERENCES `tbl_posts` (`post_id`)"
    - "ALTER TABLE tbl_posts ADD CONSTRAINT `tbl_posts_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`user_id`)"
    - "ALTER TABLE tbl_private_messages ADD CONSTRAINT `tbl_private_messages_ibfk_1` FOREIGN KEY (`sender_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_private_messages_ibfk_2` FOREIGN KEY (`receiver_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_private_messages_ibfk_3` FOREIGN KEY (`attachment_id`) REFERENCES `tbl_attachments` (`attachment_id`), ADD CONSTRAINT `tbl_private_messages_ibfk_4` FOREIGN KEY (`parent_message_id`) REFERENCES `tbl_private_messages` (`message_id`)"
    - "ALTER TABLE tbl_reactions ADD CONSTRAINT `tbl_reactions_ibfk_1` FOREIGN KEY (`comment_id`) REFERENCES `tbl_comments` (`comment_id`)"
    - "ALTER TABLE tbl_reports ADD CONSTRAINT `tbl_reports_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_reports_ibfk_2` FOREIGN KEY (`post_id`) REFERENCES `tbl_posts` (`post_id`), ADD CONSTRAINT `tbl_reports_ibfk_3` FOREIGN KEY (`resolved_by`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_reports_ibfk_4` FOREIGN KEY (`reported_user_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_reports_ibfk_5` FOREIGN KEY (`reported_comment_id`) REFERENCES `tbl_comments` (`comment_id`)"
    - "ALTER TABLE tbl_tags ADD CONSTRAINT `tbl_tags_ibfk_1` FOREIGN KEY (`creator_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_tags_ibfk_2` FOREIGN KEY (`category_id`) REFERENCES `tbl_categories` (`category_id`)"
    - "ALTER TABLE tbl_user_activity ADD CONSTRAINT `tbl_user_activity_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_user_activity_ibfk_2` FOREIGN KEY (`post_id`) REFERENCES `tbl_posts` (`post_id`), ADD CONSTRAINT `tbl_user_activity_ibfk_3` FOREIGN KEY (`comment_id`) REFERENCES `tbl_comments` (`comment_id`)"
    - "ALTER TABLE tbl_user_roles ADD CONSTRAINT `tbl_user_roles_ibfk_1` FOREIGN KEY (`created_by`) REFERENCES `tbl_users` (`user_id`), ADD CONSTRAINT `tbl_user_roles_ibfk_2` FOREIGN KEY (`updated_by`) REFERENCES `tbl_users` (`user_id`)"
    # Create users
    - 'CREATE USER IF NOT EXISTS "tmp_dql"@"%";'
    - 'GRANT USAGE ON *.* TO "tmp_dql"@"%";'
    - 'GRANT SELECT ON `db_blog`.* TO "tmp_dql"@"%";'
    - 'FLUSH PRIVILEGES;'
    - 'CREATE USER IF NOT EXISTS "tmp_dml"@"%";'
    - 'GRANT USAGE ON *.* TO "tmp_dml"@"%";'
    - 'GRANT SELECT, INSERT, UPDATE, DELETE ON `db_blog`.* TO "tmp_dml"@"%";'
    - 'FLUSH PRIVILEGES;'
  post_setup:
    postgres:
    - "SELECT pg_catalog.setval('public.tbl_attachments_attachment_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_categories_category_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_categories_hierarchy_category_hierarchy_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_comments_comment_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_followers_follower_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_labels_label_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_media_media_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_notifications_notification_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_posts_post_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_private_messages_message_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_reactions_reaction_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_reports_report_id_seq', 1, false);"
    - "SELECT pg_catalog.setval('public.tbl_status_status_id_seq', 11, true);"
    - "SELECT pg_catalog.setval('public.tbl_tags_hierarchy_tag_hierarchy_id_seq', 8, true);"
    - "SELECT pg_catalog.setval('public.tbl_tags_tag_id_seq', 10, true);"
    - "SELECT pg_catalog.setval('public.tbl_user_activity_activity_id_seq', 12, true);"
    - "SELECT pg_catalog.setval('public.tbl_user_roles_role_id_seq', 10, true);"
    - "ALTER TABLE ONLY public.tbl_attachments ADD CONSTRAINT tbl_attachments_pkey PRIMARY KEY (attachment_id);"
    - "ALTER TABLE ONLY public.tbl_categories_hierarchy ADD CONSTRAINT tbl_categories_hierarchy_pkey PRIMARY KEY (category_hierarchy_id);"
    - "ALTER TABLE ONLY public.tbl_categories ADD CONSTRAINT tbl_categories_pkey PRIMARY KEY (category_id);"
    - "ALTER TABLE ONLY public.tbl_comments ADD CONSTRAINT tbl_comments_pkey PRIMARY KEY (comment_id);"
    - "ALTER TABLE ONLY public.tbl_country ADD CONSTRAINT tbl_country_pkey PRIMARY KEY (country_name);"
    - "ALTER TABLE ONLY public.tbl_followers ADD CONSTRAINT tbl_followers_pkey PRIMARY KEY (follower_id);"
    - "ALTER TABLE ONLY public.tbl_labels ADD CONSTRAINT tbl_labels_pkey PRIMARY KEY (label_id);"
    - "ALTER TABLE ONLY public.tbl_media ADD CONSTRAINT tbl_media_pkey PRIMARY KEY (media_id);"
    - "ALTER TABLE ONLY public.tbl_notifications ADD CONSTRAINT tbl_notifications_pkey PRIMARY KEY (notification_id);"
    - "ALTER TABLE ONLY public.tbl_posts ADD CONSTRAINT tbl_posts_pkey PRIMARY KEY (post_id);"
    - "ALTER TABLE ONLY public.tbl_posts_tags ADD CONSTRAINT tbl_posts_tags_pkey PRIMARY KEY (post_id, tag_id);"
    - "ALTER TABLE ONLY public.tbl_private_messages ADD CONSTRAINT tbl_private_messages_pkey PRIMARY KEY (message_id);"
    - "ALTER TABLE ONLY public.tbl_reactions ADD CONSTRAINT tbl_reactions_pkey PRIMARY KEY (reaction_id);"
    - "ALTER TABLE ONLY public.tbl_reports ADD CONSTRAINT tbl_reports_pkey PRIMARY KEY (report_id);"
    - "ALTER TABLE ONLY public.tbl_status ADD CONSTRAINT tbl_status_pkey PRIMARY KEY (status_id);"
    - "ALTER TABLE ONLY public.tbl_tags_hierarchy ADD CONSTRAINT tbl_tags_hierarchy_pkey PRIMARY KEY (tag_hierarchy_id);"
    - "ALTER TABLE ONLY public.tbl_tags ADD CONSTRAINT tbl_tags_pkey PRIMARY KEY (tag_id);"
    - "ALTER TABLE ONLY public.tbl_user_activity ADD CONSTRAINT tbl_user_activity_pkey PRIMARY KEY (activity_id);"
    - "ALTER TABLE ONLY public.tbl_user_roles ADD CONSTRAINT tbl_user_roles_pkey PRIMARY KEY (role_id);"
    - "ALTER TABLE ONLY public.tbl_users ADD CONSTRAINT tbl_users_pkey PRIMARY KEY (user_id);"
    - "ALTER TABLE ONLY public.tbl_categories_hierarchy ADD CONSTRAINT fk_category_id FOREIGN KEY (category_id) REFERENCES public.tbl_categories(category_id);"
    - "ALTER TABLE ONLY public.tbl_categories ADD CONSTRAINT fk_created_by FOREIGN KEY (created_by) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_categories_hierarchy ADD CONSTRAINT fk_created_by FOREIGN KEY (created_by) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_user_roles ADD CONSTRAINT fk_created_by FOREIGN KEY (created_by) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_attachments ADD CONSTRAINT fk_parent_attachment_id FOREIGN KEY (parent_attachment_id) REFERENCES public.tbl_attachments(attachment_id);"
    - "ALTER TABLE ONLY public.tbl_attachments ADD CONSTRAINT fk_post_id FOREIGN KEY (post_id) REFERENCES public.tbl_posts(post_id);"
    - "ALTER TABLE ONLY public.tbl_comments ADD CONSTRAINT fk_post_id FOREIGN KEY (post_id) REFERENCES public.tbl_posts(post_id);"
    - "ALTER TABLE ONLY public.tbl_notifications ADD CONSTRAINT fk_post_id FOREIGN KEY (post_id) REFERENCES public.tbl_posts(post_id);"
    - "ALTER TABLE ONLY public.tbl_posts_tags ADD CONSTRAINT fk_post_id FOREIGN KEY (post_id) REFERENCES public.tbl_posts(post_id);"
    - "ALTER TABLE ONLY public.tbl_notifications ADD CONSTRAINT fk_sender_id FOREIGN KEY (sender_id) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_posts_tags ADD CONSTRAINT fk_tag_id FOREIGN KEY (tag_id) REFERENCES public.tbl_tags(tag_id);"
    - "ALTER TABLE ONLY public.tbl_categories ADD CONSTRAINT fk_updated_by FOREIGN KEY (updated_by) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_categories_hierarchy ADD CONSTRAINT fk_updated_by FOREIGN KEY (updated_by) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_user_roles ADD CONSTRAINT fk_updated_by FOREIGN KEY (updated_by) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_attachments ADD CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_comments ADD CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_notifications ADD CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_posts ADD CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES public.tbl_users(user_id);"
    - "ALTER TABLE ONLY public.tbl_users ADD CONSTRAINT fk_user_role_id FOREIGN KEY (role_id) REFERENCES public.tbl_user_roles(role_id);"
    mysql: []
  post_data_insertion_checks:
    postgres:
    - "SELECT 'tbl_attachments' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_attachments t) AS row_hashes"
    - "SELECT 'tbl_categories' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_categories t) AS row_hashes"
    - "SELECT 'tbl_categories_hierarchy' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_categories_hierarchy t) AS row_hashes"
    - "SELECT 'tbl_comments' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_comments t) AS row_hashes"
    - "SELECT 'tbl_country' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_country t) AS row_hashes"
    - "SELECT 'tbl_followers' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_followers t) AS row_hashes"
    - "SELECT 'tbl_labels' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_labels t) AS row_hashes"
    - "SELECT 'tbl_media' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_media t) AS row_hashes"
    - "SELECT 'tbl_notifications' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_notifications t) AS row_hashes"
    - "SELECT 'tbl_posts' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_posts t) AS row_hashes"
    - "SELECT 'tbl_posts_tags' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_posts_tags t) AS row_hashes"
    - "SELECT 'tbl_private_messages' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_private_messages t) AS row_hashes"
    - "SELECT 'tbl_reactions' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_reactions t) AS row_hashes"
    - "SELECT 'tbl_reports' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_reports t) AS row_hashes"
    - "SELECT 'tbl_status' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_status t) AS row_hashes"
    - "SELECT 'tbl_tags' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_tags t) AS row_hashes"
    - "SELECT 'tbl_tags_hierarchy' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_tags_hierarchy t) AS row_hashes"
    - "SELECT 'tbl_user_activity' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_user_activity t) AS row_hashes"
    - "SELECT 'tbl_user_roles' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_user_roles t) AS row_hashes"
    - "SELECT 'tbl_users' AS table_name, MD5(STRING_AGG(t, ',' ORDER BY t)) AS checksum FROM (SELECT MD5(ROW_TO_JSON(ROW(t.*))::TEXT) AS t FROM public.tbl_users t) AS row_hashes"
    - "SELECT 'tables' AS metadata_type, MD5(STRING_AGG(MD5(ordered_tables.table_name::TEXT), ',')) AS checksum FROM (SELECT table_name FROM information_schema.tables WHERE table_schema='public' AND table_type='BASE TABLE' ORDER BY table_name) AS ordered_tables"
    - "SELECT 'columns' AS metadata_type, MD5(STRING_AGG(MD5(ROW(ordered_columns.table_name, ordered_columns.column_name, ordered_columns.data_type)::TEXT), ',')) AS checksum FROM (SELECT TABLE_NAME, COLUMN_NAME, udt_name AS DATA_TYPE FROM information_schema.columns WHERE table_schema = 'public' ORDER BY TABLE_NAME, COLUMN_NAME, DATA_TYPE) AS ordered_columns"
    - "SELECT 'primary_keys' AS metadata_type, MD5(STRING_AGG(MD5(ROW(ordered_pks.table_name, ordered_pks.column_name)::TEXT), ',')) AS checksum FROM (SELECT tc.table_name, kcu.column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name WHERE tc.constraint_type = 'PRIMARY KEY' AND tc.table_schema = 'public' ORDER BY tc.table_name, kcu.column_name) AS ordered_pks"
    - "SELECT 'foreign_keys' AS metadata_type, MD5(STRING_AGG(MD5(ROW(ordered_fks.constraint_name, ordered_fks.table_name, ordered_fks.column_name, ordered_fks.foreign_table_name, ordered_fks.foreign_column_name)::TEXT), ',')) AS checksum FROM (SELECT c.conname AS constraint_name, c.conrelid::regclass::text AS table_name, a.attname AS column_name, c.confrelid::regclass::text AS foreign_table_name, af.attname AS foreign_column_name FROM pg_constraint AS c JOIN pg_attribute AS a ON a.attnum = ANY(c.conkey) AND a.attrelid = c.conrelid JOIN pg_attribute AS af ON af.attnum = ANY(c.confkey) AND af.attrelid = c.confrelid WHERE c.contype = 'f' ORDER BY constraint_name, table_name, column_name, foreign_table_name, foreign_column_name) AS ordered_fks"
    - "SELECT 'indexes' AS metadata_type, MD5(STRING_AGG(MD5(ROW(ordered_indexes.tablename, ordered_indexes.indexname, ordered_indexes.indexdef)::TEXT), ',')) AS checksum FROM (SELECT tablename, indexname, indexdef FROM pg_indexes WHERE schemaname = 'public' ORDER BY tablename, indexname, indexdef) AS ordered_indexes"
    mysql:
    - "SELECT 'AccessLevels' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `access_level_id`,`access_level_name`) ORDER BY `access_level_id`,`access_level_name`)) AS checksum FROM db_blog.AccessLevels"
    - "SELECT 'tbl_attachments' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `access_permissions`,`attachment_id`,`category_file`,`description`,`download_count`,`expiration_date`,`file_extension`,`file_name`,`file_path`,`file_size`,`file_type`,`is_active`,`is_featured`,`last_modified`,`metadata`,`parent_attachment_id`,`post_id`,`storage_location`,`tags_file`,`upload_date`,`uploaded_by_ip`,`user_id`,`visibility_status`) ORDER BY `access_permissions`,`attachment_id`,`category_file`,`description`,`download_count`,`expiration_date`,`file_extension`,`file_name`,`file_path`,`file_size`,`file_type`,`is_active`,`is_featured`,`last_modified`,`metadata`,`parent_attachment_id`,`post_id`,`storage_location`,`tags_file`,`upload_date`,`uploaded_by_ip`,`user_id`,`visibility_status`)) AS checksum FROM db_blog.tbl_attachments"
    - "SELECT 'tbl_categories' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `avg_post_likes`,`category_id`,`count`,`created_at`,`created_by`,`description`,`image`,`is_edited`,`name`,`parent_category`,`slug`,`updated_at`,`updated_by`,`visibility`) ORDER BY `avg_post_likes`,`category_id`,`count`,`created_at`,`created_by`,`description`,`image`,`is_edited`,`name`,`parent_category`,`slug`,`updated_at`,`updated_by`,`visibility`)) AS checksum FROM db_blog.tbl_categories"
    - "SELECT 'tbl_categories_hierarchy' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `category_hierarchy_id`,`category_id`,`color`,`created_at`,`created_by`,`description`,`icon`,`metadata`,`name`,`orden_priority`,`parent_category_name`,`status`,`updated_at`,`updated_by`,`visibility`) ORDER BY `category_hierarchy_id`,`category_id`,`color`,`created_at`,`created_by`,`description`,`icon`,`metadata`,`name`,`orden_priority`,`parent_category_name`,`status`,`updated_at`,`updated_by`,`visibility`)) AS checksum FROM db_blog.tbl_categories_hierarchy"
    - "SELECT 'tbl_comments' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `attachments`,`comment_id`,`content`,`created_at`,`dislikes_count`,`is_approved`,`is_deleted`,`is_edited`,`is_flagged`,`likes_count`,`location`,`mentions`,`metadata`,`parent_comment_id`,`post_id`,`reply_count`,`report_count`,`updated_at`,`user_agent`,`user_id`,`user_ip`,`user_location`) ORDER BY `attachments`,`comment_id`,`content`,`created_at`,`dislikes_count`,`is_approved`,`is_deleted`,`is_edited`,`is_flagged`,`likes_count`,`location`,`mentions`,`metadata`,`parent_comment_id`,`post_id`,`reply_count`,`report_count`,`updated_at`,`user_agent`,`user_id`,`user_ip`,`user_location`)) AS checksum FROM db_blog.tbl_comments"
    - "SELECT 'tbl_country' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `continent`,`country_id`,`country_name`,`region`,`X`,`Y`) ORDER BY `continent`,`country_id`,`country_name`,`region`,`X`,`Y`)) AS checksum FROM db_blog.tbl_country"
    - "SELECT 'tbl_followers' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `created_at`,`follower_data`,`follower_id`,`following_id`,`updated_at`) ORDER BY `created_at`,`follower_data`,`follower_id`,`following_id`,`updated_at`)) AS checksum FROM db_blog.tbl_followers"
    - "SELECT 'tbl_labels' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `comments_description`,`created_at`,`creator_id`,`is_active`,`label_id`,`name`,`new_description`,`parent_label_id`,`post_count`,`updated_at`,`updated_by`,`usage_frequency`,`visibility_status`) ORDER BY `comments_description`,`created_at`,`creator_id`,`is_active`,`label_id`,`name`,`new_description`,`parent_label_id`,`post_count`,`updated_at`,`updated_by`,`usage_frequency`,`visibility_status`)) AS checksum FROM db_blog.tbl_labels"
    - "SELECT 'tbl_media' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `access_rights`,`caption`,`description`,`encryption_algorithm`,`encryption_key`,`file_path`,`file_size`,`filename`,`hash`,`is_encrypted`,`media_id`,`metadata`,`post_id`,`status_id`,`type`,`updated_at`,`upload_date`,`uploader_id`,`url`,`visibility`) ORDER BY `access_rights`,`caption`,`description`,`encryption_algorithm`,`encryption_key`,`file_path`,`file_size`,`filename`,`hash`,`is_encrypted`,`media_id`,`metadata`,`post_id`,`status_id`,`type`,`updated_at`,`upload_date`,`uploader_id`,`url`,`visibility`)) AS checksum FROM db_blog.tbl_media"
    - "SELECT 'tbl_notifications' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `additional_data`,`comment_id`,`delivery_method`,`expiration_date`,`is_archived`,`is_deleted`,`is_read`,`link_to_notification`,`notification_action`,`notification_category`,`notification_channel`,`notification_context`,`notification_date`,`notification_expiry_time`,`notification_id`,`notification_language`,`notification_message`,`notification_origin`,`notification_priority`,`notification_status`,`notification_subject`,`notification_tags`,`notification_type`,`post_id`,`recipient_group`,`related_user_id`,`sender_id`,`source_application`,`user_id`) ORDER BY `additional_data`,`comment_id`,`delivery_method`,`expiration_date`,`is_archived`,`is_deleted`,`is_read`,`link_to_notification`,`notification_action`,`notification_category`,`notification_channel`,`notification_context`,`notification_date`,`notification_expiry_time`,`notification_id`,`notification_language`,`notification_message`,`notification_origin`,`notification_priority`,`notification_status`,`notification_subject`,`notification_tags`,`notification_type`,`post_id`,`recipient_group`,`related_user_id`,`sender_id`,`source_application`,`user_id`)) AS checksum FROM db_blog.tbl_notifications"
    - "SELECT 'tbl_posts' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `category_id`,`comments_count`,`created_at`,`dislikes_count`,`excerpt`,`is_featured`,`is_published`,`likes_count`,`post_content`,`post_id`,`post_title`,`published_at`,`shares_count`,`slug`,`status_id`,`total_views`,`updated_at`,`user_id`) ORDER BY `category_id`,`comments_count`,`created_at`,`dislikes_count`,`excerpt`,`is_featured`,`is_published`,`likes_count`,`post_content`,`post_id`,`post_title`,`published_at`,`shares_count`,`slug`,`status_id`,`total_views`,`updated_at`,`user_id`)) AS checksum FROM db_blog.tbl_posts"
    - "SELECT 'tbl_posts_tags' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `comments`,`label_at`,`label_status`,`post_id`,`tag_id`) ORDER BY `comments`,`label_at`,`label_status`,`post_id`,`tag_id`)) AS checksum FROM db_blog.tbl_posts_tags"
    - "SELECT 'tbl_private_messages' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `attachment_id`,`body`,`conversation_id`,`is_archived`,`is_deleted_by_receiver`,`is_deleted_by_sender`,`is_flagged`,`is_read`,`message_data`,`message_id`,`parent_message_id`,`post_id`,`priority`,`read_timestamp`,`receiver_id`,`sender_id`,`sending_time`,`status`,`subject`) ORDER BY `attachment_id`,`body`,`conversation_id`,`is_archived`,`is_deleted_by_receiver`,`is_deleted_by_sender`,`is_flagged`,`is_read`,`message_data`,`message_id`,`parent_message_id`,`post_id`,`priority`,`read_timestamp`,`receiver_id`,`sender_id`,`sending_time`,`status`,`subject`)) AS checksum FROM db_blog.tbl_private_messages"
    - "SELECT 'tbl_reactions' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `comment_id`,`device_info`,`is_active`,`post_id`,`reaction_count`,`reaction_date`,`reaction_id`,`reaction_score`,`reaction_text`,`reaction_type`,`source_ip`,`user_id`) ORDER BY `comment_id`,`device_info`,`is_active`,`post_id`,`reaction_count`,`reaction_date`,`reaction_id`,`reaction_score`,`reaction_text`,`reaction_type`,`source_ip`,`user_id`)) AS checksum FROM db_blog.tbl_reactions"
    - "SELECT 'tbl_reports' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `action_taken`,`action_timestamp`,`assigned_to`,`attachments`,`flagged_user`,`is_resolved`,`message_id`,`post_id`,`report_category`,`report_comments`,`report_entity_id`,`report_entity_type`,`report_feedback`,`report_history`,`report_id`,`report_ip_address`,`report_mechanism`,`report_priority`,`report_reason`,`report_source`,`report_timestamp`,`report_type`,`report_verification_status`,`reported_comment_id`,`reported_context_text`,`reported_user_id`,`reported_user_reputation`,`resolution_timestamp`,`resolved_by`,`severity_level`,`user_id`) ORDER BY `action_taken`,`action_timestamp`,`assigned_to`,`attachments`,`flagged_user`,`is_resolved`,`message_id`,`post_id`,`report_category`,`report_comments`,`report_entity_id`,`report_entity_type`,`report_feedback`,`report_history`,`report_id`,`report_ip_address`,`report_mechanism`,`report_priority`,`report_reason`,`report_source`,`report_timestamp`,`report_type`,`report_verification_status`,`reported_comment_id`,`reported_context_text`,`reported_user_id`,`reported_user_reputation`,`resolution_timestamp`,`resolved_by`,`severity_level`,`user_id`)) AS checksum FROM db_blog.tbl_reports"
    - "SELECT 'tbl_status' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `Name`,`status_id`) ORDER BY `Name`,`status_id`)) AS checksum FROM db_blog.tbl_status"
    - "SELECT 'tbl_tags' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `access_level`,`access_level_enum`,`active`,`category_id`,`count`,`created_at`,`creator_id`,`description`,`is_approved`,`is_edited`,`metadata`,`name`,`parent_tag`,`slug`,`status_id`,`tag_id`,`updated_at`,`visibility`) ORDER BY `access_level`,`access_level_enum`,`active`,`category_id`,`count`,`created_at`,`creator_id`,`description`,`is_approved`,`is_edited`,`metadata`,`name`,`parent_tag`,`slug`,`status_id`,`tag_id`,`updated_at`,`visibility`)) AS checksum FROM db_blog.tbl_tags"
    - "SELECT 'tbl_tags_hierarchy' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `active`,`comments`,`created_at`,`creator_id`,`deleted_at`,`description`,`is_deleted`,`modifier_id`,`relationship_type`,`revision_history`,`tag_hierarchy_id`,`tag_id`,`updated_at`,`weight`) ORDER BY `active`,`comments`,`created_at`,`creator_id`,`deleted_at`,`description`,`is_deleted`,`modifier_id`,`relationship_type`,`revision_history`,`tag_hierarchy_id`,`tag_id`,`updated_at`,`weight`)) AS checksum FROM db_blog.tbl_tags_hierarchy"
    - "SELECT 'tbl_user_activity' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `activity_description`,`activity_device`,`activity_duration`,`activity_id`,`activity_impact`,`activity_location`,`activity_privacy_level`,`activity_related_users`,`activity_source`,`activity_status`,`activity_timestamp`,`activity_type`,`activiy_extra_data`,`browser`,`comment_id`,`error_message`,`event_id`,`ip_address`,`location_coordinates`,`operating_system`,`post_id`,`referrer`,`session_duration`,`session_id`,`url`,`user_agent`,`user_id`) ORDER BY `activity_description`,`activity_device`,`activity_duration`,`activity_id`,`activity_impact`,`activity_location`,`activity_privacy_level`,`activity_related_users`,`activity_source`,`activity_status`,`activity_timestamp`,`activity_type`,`activiy_extra_data`,`browser`,`comment_id`,`error_message`,`event_id`,`ip_address`,`location_coordinates`,`operating_system`,`post_id`,`referrer`,`session_duration`,`session_id`,`url`,`user_agent`,`user_id`)) AS checksum FROM db_blog.tbl_user_activity"
    - "SELECT 'tbl_user_roles' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `active_sessions`,`created_at`,`created_by`,`created_by_device`,`created_by_ip`,`description`,`expiry_date`,`is_active`,`last_sessions`,`permissions`,`restrictions`,`role_id`,`role_name`,`updated_at`,`updated_by`,`updated_by_device`,`updated_by_ip`) ORDER BY `active_sessions`,`created_at`,`created_by`,`created_by_device`,`created_by_ip`,`description`,`expiry_date`,`is_active`,`last_sessions`,`permissions`,`restrictions`,`role_id`,`role_name`,`updated_at`,`updated_by`,`updated_by_device`,`updated_by_ip`)) AS checksum FROM db_blog.tbl_user_roles"
    - "SELECT 'tbl_users' AS table_name, MD5(GROUP_CONCAT(CONCAT_WS(',', `active`,`avatar_url`,`bio`,`contact_info`,`created_at`,`email_address`,`first_name`,`full_name`,`last_login`,`last_name`,`notification_preferences`,`password_hash`,`phone_number`,`role_id`,`social_media_links`,`updated_at`,`user_id`,`username`,`website`) ORDER BY `active`,`avatar_url`,`bio`,`contact_info`,`created_at`,`email_address`,`first_name`,`full_name`,`last_login`,`last_name`,`notification_preferences`,`password_hash`,`phone_number`,`role_id`,`social_media_links`,`updated_at`,`user_id`,`username`,`website`)) AS checksum FROM db_blog.tbl_users"
    - "SELECT 'tables' AS metadata_type, MD5(GROUP_CONCAT(MD5(ordered_tables.table_name) ORDER BY ordered_tables.table_name SEPARATOR ',')) AS checksum FROM (SELECT ist.table_name FROM information_schema.tables AS ist WHERE ist.table_schema = 'db_blog' ORDER BY ist.table_name) AS ordered_tables"
    - "SELECT 'columns' AS metadata_type, MD5(GROUP_CONCAT(MD5(CONCAT(ordered_columns.table_name, ':', ordered_columns.column_name, ':', ordered_columns.data_type)) SEPARATOR ',')) AS checksum FROM (SELECT TABLE_NAME, COLUMN_NAME, DATA_TYPE FROM information_schema.columns WHERE table_schema = 'db_blog' ORDER BY TABLE_NAME, COLUMN_NAME, DATA_TYPE) AS ordered_columns"
    - "SELECT 'primary_keys' AS metadata_type, MD5(GROUP_CONCAT(MD5(CONCAT(ordered_pks.table_name, ':', ordered_pks.column_name)) SEPARATOR ',')) AS checksum FROM (SELECT TABLE_NAME, COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = 'db_blog' AND COLUMN_KEY = 'PRI' ORDER BY TABLE_NAME, COLUMN_NAME) AS ordered_pks"
    - "SELECT 'foreign_keys' AS metadata_type, MD5(GROUP_CONCAT(MD5(CONCAT(ordered_fks.table_name, ':', ordered_fks.column_name, ':', ordered_fks.constraint_name, ':', ordered_fks.referenced_table_name, ':', ordered_fks.referenced_column_name)) SEPARATOR ',')) AS checksum FROM (SELECT TABLE_NAME,COLUMN_NAME,CONSTRAINT_NAME, REFERENCED_TABLE_NAME,REFERENCED_COLUMN_NAME FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_SCHEMA = 'db_blog' ORDER BY TABLE_NAME, COLUMN_NAME, CONSTRAINT_NAME, REFERENCED_TABLE_NAME, REFERENCED_COLUMN_NAME) AS ordered_fks"
    - "SELECT 'indexes' AS metadata_type, MD5(GROUP_CONCAT(MD5(CONCAT(ordered_indexes.table_name, ':', ordered_indexes.index_name)) SEPARATOR ',')) AS checksum FROM (SELECT TABLE_NAME, INDEX_NAME FROM INFORMATION_SCHEMA.STATISTICS WHERE TABLE_SCHEMA = 'db_blog' Order by TABLE_NAME, INDEX_NAME) AS ordered_indexes"
